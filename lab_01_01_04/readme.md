# __Отчёт по лабораторной работе №1 "Обработка больших чисел", Вариант 4__
----

## Выполнил: Калашков Павел ИУ7-36Б, Вариант 7 (по журналу)

[0. Описание условия задачи](#описание-условия-задачи)

[1. Техническое задание](#техническое-задание)

[1.1. Исходные данные](#исходные-данные)

[1.2. Результаты](#результаты)

[1.3. Задача, реализуемая программой](#задача-реализуемая-программой)

[1.4. Способ обращения к программе](#способ-обращения-к-программе)

[1.5. Возможные аварийные ситуации и ошибки пользователя](#возможные-аварийные-ситуации-и-ошибки-пользователя)

[2. Описание внутренних структур данных](#описание-внутренних-структур-данных)

[3. Описанный алгоритм](#описанный-алгоритм)

[3.1. Чтение данных и проверка их корректности](#чтение-данных-и-проверка-их-корректности)

[3.2. Обработка данных (деление)](#обработка-данных-деление)

[3.3. Вывод результата в нормальном виде](#вывод-результата-в-нормальном-виде)

[4. Функциональное тестирование](#функциональное-тестирование)

[5. Теоретическая часть](#теоретическая-часть)

[6. Выводы по проделанной работе](#выводы-по-проделанной-работе)

## __Описание условия задачи__

Цель работы: реализация арифметических операций над числами, выходящими за
разрядную сетку персонального компьютера, выбор необходимых типов данных для
хранения и обработки указанных чисел.

Составить программу деления двух чисел, где порядок имеет
до 5 знаков: от –99999 до +99999, а мантисса – до 30 знаков.
Программа должна осуществлять ввод чисел и выдавать либо верный
результат в указанном формате (при корректных данных), либо сообщение
о невозможности произвести счет.

Смоделировать операцию деления целого числа длиной до
30 десятичных цифр на действительное число в форме
±m.nЕ±K, где суммарная длина мантиссы (m+n) - до 30
значащих цифр, а величина порядка K - до 5 цифр.
Результат выдать в форме ±0.m1Е±K1, где m1 - до 30
значащих цифр, а K1 - до 5 цифр.

## __Техническое задание__

### __Исходные данные__

На вход программе подаются два числа: *a* и *b* в формате
```bash
a
b
```
где *a* - целое число длиной до 30 десятичных цифр
    *b* - действительное число в форме *±m.nЕ±K*, где суммарная длина мантиссы (m+n) - до 30
значащих цифр, а величина порядка *K* - от 1 до 5 цифр.

Особенности ввода исходных данных:

- 1 - числа подаются программе посредством ввода через клавиатуру в консоль.
- 2 - у чисел не должно быть незначащих нулей.
- 3 - числа могут содержать, а могут и не содержать знак (плюс может ставиться, а может и опускаться)
- 4 - число b не может быть равно нулю

### __Результаты__

На выходе программа выводит число *с* в формате 
```bash
c
```
где *c* - результат деления введённого целого числа *a* на введённое действительное число *b* в форме *±0.m1Е±K1*, где *m1* - до 30 значащих цифр, а *K1* - от 1 до 5 цифр

Особенности выходных данных:

- 1 - в случае переполнения порядка K1 в положительном направлении вывод будет равен "Бесконечность"
- 2 - в случае переполнения порядка K1 в отрицательном значении вывод будет равен "Машинный ноль"

### __Задача, реализуемая программой__

Задачей программы является реализация операции деления целого числа длиной до
30 десятичных цифр на действительное число в форме
±m.nЕ±K, где суммарная длина мантиссы (m+n) - до 30
значащих цифр, а величина порядка K - до 5 цифр.
Результат выдать в форме ±0.m1Е±K1, где m1 - до 30
значащих цифр, а K1 - до 5 цифр.

### __Способ обращения к программе__

Обращение к программе происходит посредством запуска исполняемого файла main.exe

### __Возможные аварийные ситуации и ошибки пользователя__

Аварийной ситуацией является:

- несоблюдение формата входных данных (см. [тестирование](#функциональное-тестирование));
- деление на ноль;
- переполнение порядка в процессе деления (получение машинного нуля или бесконечности);

-------

## __Описание внутренних структур данных__

Для реализации деления и обработки больших чисел были реализованы две структуры данных:

```c
typedef struct 
{
    int is_significand_negative; // является ли мантисса отрицательной
    int significand[MAX_SIGNIFICAND_LENGTH + 1]; // массив, хранящий цифры мантиссы
    int significand_length; // длина мантиссы
    int dot_index; // индекс, с которого начинается дробная часть
    int base; // порядок числа
    int is_base_negative; // является ли порядок отрицательным
    int start_index, end_index; // начало и конец обрабатываемой части
} long_float;

typedef struct
{
    int is_negative; // является ли число отрицательным
    int number[MAX_INT_LENGTH + 1]; // массив, хранящий цифры числа
    int length; // длина числа
    int start_index, end_index; // начало и конец обрабатываемой части
} long_int;
```

Данные структуры используются для обработки и хранения чисел, выходящих за разрядную сетку персонального комьютера.

## __Описанный алгоритм__

Алгоритм делится на три главных части:

- 1 - чтение данных и проверка их корректности
- 2 - обработка данных (деление)
- 3 - вывод результата в нормальном виде

### __Чтение данных и проверка их корректности__

Каждый тип данных считывается по одной и той же методике:

- 1 - чтение строки из консоли
- 2 - проверка, является ли строка запрашиваемым числом
- 3 - если является, то преобразовать строку в число, иначе вернуть код ошибки

При этом учитываются особенности ввода:

- числа вводятся без незначащих нулей;
- на ноль делить нельзя;

### __Обработка данных (деление)__

Деление происходит с помощью программной реализации стандартного деления столбиком:
1) Ищем первое неполное делимое;
2) Вычитаем;
3) Сравниваем, если можно вычесть ещё, вычитаем;
4) Находим очередную цифру;
5) Сносим цифру (десяток);
6) Повторяем, пока можем;

Единственное отличие от стандартной процедуры заключается в замещении операции умножения многократным вычитанием. Такое решение было сделано в силу производительности (вычесть 9 раз будет гораздо быстрее, чем умножать на 9 и вычитать 1 раз).

Деление в столбик было реализовано с помощью операции сравнения чисел, вычитания, сдвига цифр (в случае переполнения), а также округления (в случае переполнения).

### __Вывод результата в нормальном виде__

Вывод результата деления в нормальном виде происходит путём нормализации числа и его вывода в консоль.

## __Функциональное тестирование__

Были составлены и приведены функциональные тесты:

|Входные данные|Выходные данные|
|:-------------|---------------:|
|abc|Incorrect input!|
|12345<br>abc|Incorrect input!|
|0123<br>1e1|Incorrect input!|
|1234<br>01e0|Incorrect input!|
|1234<br>1e003|Incorrect input!|
|1234<br>0e1|Incorrect input!|
|1234<br>1.1.1e5|Incorrect input!|
|1234<br>1,2,1e0|Incorrect input!|
|1234<br>1.2|Incorrect input!|
|1234<br>12e3e1|Incorrect input!|
|1234<br>--1e1|Incorrect input!|
|12345678901234567890123456789055555<br>1e1|Incorrect input!|
|1234<br>234567890123456789012345678.905555E1|Incorrect input!|
|1234<br>1e999990|Incorrect input!|
|1234<br>12345e-999991|Incorrect input!|
|1234<br>1e0|0.1234E4|
|2<br>20e-1|0.1E1|
|-20<br>0,2E-1|-0.1E4|
|20<br>-0.2e+1|-0.1E2|
|-1<br>-3e0|0.333333333333333333333333333333E0|
|786<br>9.8e1|0.802040816326530612244897959184E1|
|123456789012345678901234567890<br>987654321098765432109876543210e0|0.12499999886093750001423828124E0|
|999999999999999999999999999999<br>5e-5|0.2E35|
|999999999999999999999999999999<br>0.000001e-99999|Infinity!|
|1<br>999999999999999999999999999e99999|Machine zero!|

## __Теоретическая часть__
1) Каков возможный диапазон чисел, представляемых в ПК?

Диапазон значения зависит от размера области памяти, выделяемой под хранение переменной конкретного типа, он зависит от наличия знака и от типа представления числа (целое или вещественное). Так, если под хранение целого положительного числа выделено 16 разрядов, то его максимальное значение не превышает 2^16 - 1 = 65 535, а если выделено 32 разряда, то максимальное значение составит 2^32 - 1 = 4 294 967 295. Для 64
разрядов максимально возможное значение числа равно 2^64 - 1 = 18 446 744 073 709 551 615.

2) Какова возможная точность представления чисел, чем она определяется?

Точность представления вещественног очисла зависит от максимальнго возможной длины мантиссы, которая зависит от области выделяемой памяти и наличия знака. Следовательно, возможная точность представления и порядок должны укладываться в разрядную сетку компьютера (32 или 64) Если длина мантиссы выходит за границы разрядной сетки, то число округляется.

3) Какие стандартные операции возможны над числами?

Сложение, вычетание, умножение, деление.

4) Какой тип данных может выбрать программист, если обрабатываемые числа превышают возможный диапазон представления чисел в ПК?

Программист может воспользоваться типами данных из дополнительно подключаемых библиотек, предназначенных для работы с такими большими числами.

Другой вариант - хранить с помощью массива или структуры, в которой можно поразрядно хранить число в массиве, а также информацию о знаке, количестве цифр и т.п. Также можно хранить числа по частям, разбивая на несколько стандартных типов данных.

5) Как можно осуществить операции над числами, выходящими за рамки машинного представления?

Действия происходят поразрядно, т.е. как при вычислениях столбиком.

## __Выводы по проделанной работе__

В случае, когда размер числа выходит за границы разрядной сетки компьютера, хранение числа можно реализовывать с помощью структур, а оперции над такими числами нужно производить поразрядно, т.е. столбиком (было подтверждено на примере операции деления). Такое решение соответствует большинству требований, которые можно предъявлять к подобным типам данных.

